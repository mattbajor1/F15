export const API_BASE = (import.meta.env.VITE_FUNCTIONS_EMULATOR==='true' && location.hostname==='localhost') ? (import.meta.env.VITE_API_BASE2 || 'http://127.0.0.1:5001/YOUR_PROJECT/us-central1/api') : '/api';
export async function api(path, options={}){ const res = await fetch(`${API_BASE}${path}`, { credentials:'include', headers:{ 'Content-Type':'application/json', ...(options.headers||{}) }, ...options }); if(!res.ok) throw new Error(`${res.status} ${res.statusText}`); return res.json(); }
export const postJSON = (path, body) => api(path, { method:'POST', body: JSON.stringify(body) })